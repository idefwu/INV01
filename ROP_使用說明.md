# 📋 ROP 再訂購點系統使用說明

## 🚀 快速開始

### 1. 測試系統功能
開啟以下頁面來測試系統功能：
- `test_system.html` - 完整功能測試頁面
- `debug.html` - 系統診斷頁面
- `rop_test.html` - ROP專項測試

### 2. 使用主系統
開啟 `index.html` 使用完整的庫存管理系統

---

## 🔧 功能測試步驟

### 步驟1：系統初始化測試
1. 開啟 `test_system.html`
2. 點擊「測試系統初始化」按鈕
3. 確認看到：
   - ✅ InventorySystem 初始化成功
   - ✅ ProductsModule 初始化成功  
   - ✅ ROPModule 初始化成功
   - ✅ 載入了 3 個商品
   - ✅ 發現 2 個需要補貨的商品

### 步驟2：ROP功能測試
1. 點擊「測試ROP系統」按鈕
2. 點擊「顯示缺貨清單」按鈕
3. 應該看到需要補貨的商品：
   - A002 鐵釘：庫存20 ≤ ROP30，建議補貨80
   - B001 電鑽：庫存12 ≤ ROP50，建議補貨200

### 步驟3：商品操作測試
1. 點擊「新增測試商品」
2. 點擊「編輯商品」
3. 點擊「刪除商品」
4. 確認所有操作都會顯示成功提示

---

## 📊 ROP系統功能說明

### 核心功能
1. **自動檢測缺貨**：當庫存 ≤ 再訂購點時自動標記
2. **生成補貨清單**：顯示需要補貨的商品及建議數量
3. **報表匯出**：CSV格式匯出缺貨報表
4. **即時設定調整**：可直接在界面修改ROP和補貨量

### 預設測試數據
```
A001 螺絲釘：庫存50 > ROP40 → 不需補貨
A002 鐵釘：  庫存20 ≤ ROP30 → 需要補貨80個
B001 電鑽：  庫存12 ≤ ROP50 → 需要補貨200台
```

### ROP計算邏輯
- **判斷條件**：`目前庫存 ≤ 再訂購點`
- **建議補貨量**：使用預設的 `reorderQuantity`
- **預估成本**：`建議補貨量 × 成本價`

---

## 🛠️ 故障排除

### 如果按鈕沒有反應：

1. **檢查JavaScript載入**
   ```javascript
   // 在瀏覽器控制台執行
   console.log(typeof InventorySystem); // 應該顯示 "function"
   console.log(typeof ROPModule);       // 應該顯示 "function"
   ```

2. **檢查系統初始化**
   ```javascript
   // 檢查是否有錯誤
   window.onerror = function(msg, url, line) {
       console.error('錯誤:', msg, 'at', url + ':' + line);
   };
   ```

3. **手動初始化測試**
   ```javascript
   // 手動創建系統實例
   const system = new InventorySystem();
   console.log('商品數量:', system.products.length);
   console.log('需補貨商品:', system.getReorderProducts().length);
   ```

### 常見問題解決方案：

**問題1：點擊按鈕沒有反應**
- 解決：使用 `test_system.html` 代替 `index.html` 進行測試

**問題2：ROP頁面空白**
- 解決：確認 `rop.js` 檔案已載入，檢查瀏覽器控制台是否有錯誤

**問題3：數據沒有顯示**
- 解決：檢查 `models.js` 中的範例數據是否正確載入

---

## 📈 使用主系統

### 在index.html中使用ROP功能：

1. **導航到ROP頁面**
   - 點擊左側選單「再訂購點管理」

2. **查看缺貨清單**
   - 系統會自動顯示需要補貨的商品
   - 紅色警告圖示表示需要補貨

3. **調整ROP設定**
   - 在「再訂購點設定」表格中直接修改數值
   - 修改後會即時更新並記錄活動

4. **建立進貨單**
   - 在缺貨清單中點擊「建立進貨單」
   - 系統會自動創建進貨單到「進貨管理」

5. **匯出報表**
   - 點擊「匯出報表」按鈕下載CSV檔案

---

## 🎯 系統驗證檢查清單

- [ ] 系統能正常初始化
- [ ] 商品按鈕功能正常（編輯、查看、刪除）  
- [ ] ROP頁面能正常顯示
- [ ] 缺貨清單能正確生成
- [ ] ROP設定可以即時修改
- [ ] 報表可以正常匯出
- [ ] 進貨單創建功能正常

如果所有檢查項目都通過，表示ROP系統已成功實現並可正常使用！

---

## 📞 技術支持

如果遇到問題，請：
1. 先使用 `debug.html` 進行診斷
2. 查看瀏覽器開發者工具的控制台錯誤
3. 使用 `test_system.html` 進行功能驗證